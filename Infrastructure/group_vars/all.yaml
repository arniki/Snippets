mysql_host: db1
mysql_database: agama
mysql_user: agama
mysql_password: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  65376362623061633738303830353265333363303730323766656538666461303730383236393230
  3739363464336336376361663237643462323735623262300a643633653633623462373433356564
  36363865636538646337633134303939306664346439316461613938666436303834306664386531
  3131623264303661630a376532643732326532613332373736646532353963373364313934353037
  3534

mysql_exporter_user: exporter
mysql_exporter_pass: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  64316136623664653864343137623465613235626339643962326433383162326532353663323362
  6462653862333737393537656262316333653531646564360a626134653938373538393463393338
  36383434313362346431393134613461373065653964313330633163373362333638343438616232
  3662633061623838320a373531656262663430353335663539633338633035353330386163663065
  3233

mysql_backup_user: backup
mysql_backup_pass: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  33333837383334353761373033663638343232663264633038353931323030386261643965333132
  3837613963643237653931376561623337323737326539370a303265336534356162396232306166
  34366634616139343532303361663430653462383261366461626231346435303037356464346134
  6133386432343762640a393164643334626165373762383061653131616335353366666263623436
  3863

mysql_replication_user: replication
mysql_replication_pass: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  34353039643539333031366464343432316430623738303936333530333038363562326637306261
  6439336565646334656338633366343430316665656262360a333737613838393363656232363030
  37383031643432616165636562626530366230653934663934386238363538383864386339343431
  3465333965343534620a626161663964613463626235313335356134343066636431353938343363
  3139

dns_forwarders:
  - 1.1.1.1
  - 8.8.8.8
  - 9.9.9.9
  - 9.9.9.10

allowed_networks:
  - 192.168.42.0/24
  - 127.0.0.0/8
  - 172.17.0.0/16

domain_name: cool
top_level_domain: .ab
username: arniki
mail_subdomain: mail

prometheus_exporters:
  node:
    port: 9100

  nginx:
    port: 9113

  mysql:
    port: 9104

  bind:
    port: 9119

backup_ip: 192.168.42.156

docker_grafana_port: 3000
docker_agama_port: 8000

haproxy_port: 88
docker_haproxy_exporter_port: 9101
keepalived_exporter_port: 9165
agama_container_per_vm: 2

keepalived_priorities:
  - name: "{{ groups['haproxy'][0] }}"
    priority: 110
  - name: "{{ groups['haproxy'][1] }}"
    priority: 100

dns_transfer_key: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  32346336643636306362336462393365613564333231616364356432663365646135396363666566
  3133623638356237613639666230623734316230303566390a616535366532636234616564643739
  65666133643336613539346639616131323335363761326665643433316362343830363632646165
  3065396631303566640a366465623865356532323564363832373233636662373134373837333266
  37623130393936613734333933363137396637353065383434656430666332653562613835363037
  3230373435643163393738656462393436373964366437326537

dns_update_key: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  30343333393765376466616361626135623038396633633530316666383034323165353931393035
  3535333335646639623766336331616231323436303033390a313564353966316233333063333033
  32396232646161346163316636343734353936346432313162623962356531653534663030316335
  3339326133653564650a376566306237363531653935333632393764346233396264636139303339
  37666565303866383337303066653431636332346131626566333761653334393761666462633461
  6365613966633463623062633238666465383439366463373764

a_records:
  - subdomain: backup
    ip: 192.168.42.39

dns_cnames:
  - cname: ns1
    real: "{{ groups['dns_servers'][0] }}"
  - cname: ns2
    real: "{{ groups['dns_servers'][1] }}"
  - cname: ns3
    real: "{{ groups['dns_servers'][2] }}"
  - cname: db1
    real: "{{ groups['db_servers'][0] }}"
  - cname: db2
    real: "{{ groups['db_servers'][1] }}"
  - cname: www1
    real: "{{ groups['web_servers'][0] }}"
  - cname: www2
    real: "{{ groups['web_servers'][1] }}"
  - cname: www3
    real: "{{ groups['web_servers'][2] }}"
  - cname: hpxy1
    real: "{{ groups['haproxy'][0] }}"
  - cname: hpxy2
    real: "{{ groups['haproxy'][1] }}"
  - cname: kplvd1
    real: "{{ groups['haproxy'][0] }}"
  - cname: kplvd2
    real: "{{ groups['haproxy'][1] }}"
  - cname: prometheus
    real: "{{ groups['prometheus'][0] }}"
  - cname: grafana
    real: "{{ groups['grafana'][0] }}"
  - cname: influxdb
    real: "{{ groups['influxdb'][0] }}"

prometheus_jobs:
  - name: node
    targets: "{{ groups['all'] }}"
    port: 9100
  - name: bind
    targets: "{{ groups['dns_servers'] }}"
    port: 9119
  - name: mysql
    targets: "{{ groups['db_servers'] }}"
    port: 9104
  - name: www
    targets: "{{ groups['app_servers'] }}"
    port: 9113
  - name: hprxy
    targets: "{{ groups['haproxy'] }}"
    port: 9101
  - name: kplvd
    targets: "{{ groups['haproxy'] }}"
    port: 9165
